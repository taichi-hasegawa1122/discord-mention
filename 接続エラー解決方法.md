# 接続エラー「Used disallowed intents」の解決方法

## 問題
サーバー起動時に以下のエラーが発生する場合：
```
❌ 接続に失敗しました:
エラータイプ: Error
エラーメッセージ: Used disallowed intents
```

## 原因
Discord Developer Portalで必要なIntents（権限）が有効になっていません。

## 解決手順

### 1. Discord Developer Portalにアクセス
1. [Discord Developer Portal](https://discord.com/developers/applications) を開く
2. 作成したアプリケーションを選択

### 2. Bot設定を開く
1. 左メニューから「Bot」をクリック

### 3. Privileged Gateway Intentsを有効化
1. ページを下にスクロールして「Privileged Gateway Intents」セクションを見つける
2. 以下のチェックボックスを**必ず有効化**してください：
   - ✅ **MESSAGE CONTENT INTENT**（必須）
   - ✅ **SERVER MEMBERS INTENT**（推奨）

### 4. 変更を保存
- 変更は通常自動保存されますが、確認してください

### 5. サーバーを再起動
1. ターミナルでサーバーを停止（Ctrl+C）
2. 再度サーバーを起動：
   ```bash
   npm start
   ```
   または
   ```bash
   node check-connection.js
   ```

### 6. 接続確認
以下のメッセージが表示されれば成功です：
```
✅ Discord Botに接続成功！
Bot名: YourBot#1234
参加しているサーバー数: 1
```

## 注意事項
- Intentsを有効化した後、Botを再起動する必要があります
- Intentsの変更は即座に反映されますが、既に接続しているBotは切断される場合があります

